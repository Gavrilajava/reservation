exit
Booking.book(@valid_params.except(:table))
Table.count
@valid_params
Booking.last
continue
Booking.get_best_tables_combination(tables, persons)
persons = @valid_params[:persons]
tables = Table.free(@valid_params[:time]).pluck(:capacity)
exit
Booking.get_best_tables_combination(tables, persons)
Posting.get_best_tables_combination(tables, persons)
persons = @valid_params[:persons]
tables = Table.free(@valid_params[:time]).pluck(:capacity)
@valid_params[:persons]
continue
Booking.get_all_tables_combinations(tables, persons)
persons = 99
tables = Table.free(@valid_params[:time]).pluck(:capacity)
exit
min_seats
combinations
exit
result
continue
less_tables
exit
index
table
less_tables
continue
Table.where.not(id: Table.occupied(time).pluck(:id))
Table.where.not(id: Table.occupied(time))
Table.where.not(id: occupied(time))
Table.free(time).count
Table.free(time)
Table.occupied(time)
Table.occupied
continue
Table.all
Table.joins(:bookings).where(bookings: { time: time })
Table.joins(:bookings).where.not(bookings: { time: time })
Table.includes(:bookings).where.not(bookings: { time: "2020-09-05 10:00:00" })
Table.joins(:bookings).where.not(bookings: { time: "2020-09-05 10:00:00" })
Table.joins(:bookings).where.not(bookings: { time: time })
Table.joins(:bookings).where(bookings: { time: time })
Booking.all
Table.all
Table.includes(:bookings).where(bookings: { time: time })
Table.includes(:bookings).where.not(bookings: { time: time })
Table.get_free(time)
continue
time
Table.get_free("2020-09-05 10:00:00").count
Table.get_free("2020-09-05 10:00:00")
time
Table.get_free(time)
Booking.last
time
